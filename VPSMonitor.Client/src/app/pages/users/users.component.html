<div *ngIf="isLoading">Loading...</div>

<div *ngIf="!isLoading">
  <div class="item">
    <h1>Users list</h1>
    <button (click)="handleModalOpened()" class="btn">Add new user.</button>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th *ngIf="!sortByDownId" (click)="sortUsersByIdDesc()">User ID ↑</th>
        <th *ngIf="sortByDownId" (click)="sortUsersByIdAsc()">User ID ↓</th>
        <th>Username</th>
        <th>Permissions</th>
        <th>Home Directory Path</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
     <tr *ngFor="let user of users">
        <td>{{ user.id }}</td>
        <td>{{ user.username }}</td>
        <td>{{ user.permissions }}</td>
        <td>{{ user.homeDirectoryPath }}</td>
        <td><button (click)="deleteUser(user.username)">Delete User</button></td>
    </tr>
    </tbody>
  </table>
  
  <app-modal *ngIf="isModalOpen" (closed)="handleModalClosed()" title="Add new user">
      <form (ngSubmit)="addNewUser()">
    <label>
      Username:
      <input type="text" [(ngModel)]="newUsername" name="newUsername" required>
    </label>
    <label>
      Password:
      <input type="password" [(ngModel)]="password" name="password" required>
    </label>
    <label>
      Confirm Password:
      <input type="password" [(ngModel)]="ConfirmPassword" name="ConfirmPassword" required>
    </label>
    <button type="submit">Add User!</button>
  </form>
  </app-modal>
</div>